webpackJsonp([12],{"+2wW":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("//Fk"),s=o.n(n),i=o("M4fF"),a=o.n(i),l=o("Vxr5"),c={name:"note",data:function(){return{noteInfo:[],selectNotes:{},noteBookId:"",noteTitle:"",statusText:"笔记未改动",noteBookTitle:""}},created:function(){var t=this;this.getInfo(),this.noteBookTitle=this.$route.query.title;var e=this.$route.query.id;console.log(this.$route),e&&(this.getNoteFromNoteBook(e).then(function(e){0==e.data.length&&t.$message.warning("请选择或添加笔记")}),this.noteBookId=e)},mounted:function(){this.$route.query.id||this.$message.warning("请先选择笔记本后再添加笔记")},methods:{getInfo:function(){var t=this;l.a.getInfo().then(function(e){e.isLogin||(t.$message.error("登录失效，请重新登录"),t.$router.push({path:"/login"}))})},updateNote:a.a.debounce(function(){var t=this;l.a.updateNote(this.selectNotes.id,{content:this.selectNotes.content,title:this.selectNotes.title}).then(function(e){t.statusText="已保存",console.log(e.msg)}).catch(function(e){t.statusText="保存出错"})},1e3),debounce:function(t,e){var o=void 0;return function(n){var s=this;clearTimeout(o),o=setTimeout(function(){return t.call(s,n)},e)}},handleOpen:function(t,e){},handleClose:function(t,e){},getNoteFromNoteBook:function(t){var e=this;return new s.a(function(o,n){l.a.getNoteFromNoteBook(t).then(function(t){o(t),console.log(t.data),e.noteInfo=t.data,e.selectNotes=t.data[0]||{}})})},selectNote:function(t){console.log(t),this.selectNotes=this.noteInfo[t],console.log(this.selectNotes)},delNote:function(t){var e=this;this.$confirm("此操作将删除该笔记, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.a.delNOte(t).then(function(t){e.$message.success("删除成功"),e.getNoteFromNoteBook(e.noteBookId)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},addNote:function(){var t=this;l.a.addNote(this.noteBookId,{content:"",title:""}).then(function(e){t.$message.success("添加成功"),console.log(e.data),t.getNoteFromNoteBook(t.noteBookId)})}}},u={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-container",[o("el-col",{attrs:{span:6}},[o("el-button",{staticStyle:{margin:"10px 0"},attrs:{type:"success",icon:"el-icon-circle-plus-outline",disabled:!t.$route.query.id,round:""},on:{click:t.addNote}},[t._v("添加笔记")]),t._v(" "),o("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2"},on:{open:t.handleOpen,close:t.handleClose}},[o("el-submenu",{attrs:{index:"1"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-s-management"}),t._v(" "),o("span",[t._v(t._s(t.noteBookTitle?t.noteBookTitle:"")+" ")])]),t._v(" "),t._l(t.noteInfo,function(e,n){return o("el-menu-item-group",{key:n},[o("el-menu-item",{on:{click:function(e){return t.selectNote(n)}}},[t._v("笔记标题: "+t._s(e.title))])],1)}),t._v(" "),o("el-menu-item-group",{directives:[{name:"show",rawName:"v-show",value:0==t.noteInfo.length,expression:"noteInfo.length == 0"}]},[o("el-menu-item",[t._v(t._s(t.$route.query.id?" 暂无笔记，请点击上方添加笔记 ":"请先选择笔记本后点击添加笔记")+"\n            ")])],1)],2)],1)],1),t._v(" "),o("el-col",{attrs:{span:18}},[o("el-header",[o("el-row",[o("el-col",{attrs:{span:6}},[o("span",[t._v("创建时间: "+t._s(t._f("formDate")(t.selectNotes.createdAt)))])]),t._v(" "),o("el-col",{attrs:{span:6}},[o("span",[t._v("更新时间 :"+t._s(t._f("formDate")(t.selectNotes.updatedAt)))])]),t._v(" "),o("el-col",{attrs:{span:6}},[o("span",[t._v(t._s(t.statusText)+" ")])]),t._v(" "),o("el-col",{attrs:{span:6}},[o("i",{staticClass:"el-icon-delete",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.delNote(t.selectNotes.id)}}},[t._v("删除笔记")])])],1)],1),t._v(" "),o("el-main",[o("el-row",{attrs:{type:"flex",justify:"left"}},[o("el-col",{staticStyle:{margin:"10px 0"},attrs:{span:8}},[o("el-input",{attrs:{disabled:0==t.noteInfo.length,type:"text",placeholder:" 输入笔记标题"},on:{input:t.updateNote},nativeOn:{keyup:function(e){t.statusText="正在输入..."}},model:{value:t.selectNotes.title,callback:function(e){t.$set(t.selectNotes,"title",e)},expression:"selectNotes.title"}})],1)],1),t._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.selectNotes.content,expression:"selectNotes.content"}],staticStyle:{width:"100%"},attrs:{disabled:0==t.noteInfo.length,id:"content",focus:"",rows:"18",placeholder:"输入笔记内容"},domProps:{value:t.selectNotes.content},on:{keyup:function(e){t.statusText="正在输入..."},input:[function(e){e.target.composing||t.$set(t.selectNotes,"content",e.target.value)},t.updateNote]}})],1)],1)],1)],1)},staticRenderFns:[]};var r=o("VU/8")(c,u,!1,function(t){o("iAhJ")},"data-v-14c8b04d",null);e.default=r.exports},iAhJ:function(t,e){}});
//# sourceMappingURL=12.201e2df5f8685b3a79d6.js.map