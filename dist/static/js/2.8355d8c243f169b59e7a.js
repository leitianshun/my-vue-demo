webpackJsonp([2],{"5I7m":function(e,t){},BIhC:function(e,t,s){"use strict";var n=s("//Fk"),o=s.n(n),a=s("M4fF"),r=(s.n(a),s("Y81h")),i=s.n(r),u=s("UVIz");s.n(u);t.a=function(e,t,s){var n=window.localStorage.getItem("token");return i.a.start(),new o.a(function(o,a){var r=new XMLHttpRequest;r.open(""+t,"//blog-server.hunger-valley.com"+e,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.setRequestHeader("Authorization",n),r.send(s),r.onreadystatechange=function(){if(4==r.readyState&&200==r.status){i.a.done();var e=JSON.parse(r.responseText);o(e)}}}).catch(function(e){i.a.done(),Object(a.reject)(e)})}},K31e:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("Dd8w"),o=s.n(n),a=s("Vxr5"),r=s("i/zZ"),i=s("zL8q"),u=s("NYxO"),l=s("BIhC"),c=/^[\w\u4e00-\u9fa5]{3,15}$/,d=/^.{6,10}/,p={data:function(){return{username:"",password:"",isShow:!1}},methods:o()({},Object(u.d)(["setUsername"]),Object(u.b)(["setUser"]),{login:function(){var e=this;c.test(this.username)?d.test(this.password)?(r.a.$emit("userInfo",{info:this.username}),a.a.login({username:this.username,password:this.password}).then(function(t){window.localStorage.setItem("token","access_token"),console.log(t),e.$router.push("/"),i.Message.success("登录成功"),window.localStorage.setItem("userName",e.username),e.blogLogin()}).catch(function(t){e.$message.error(t.msg)})):this.$message.error("密码格式错误，请输入6~10个字符"):this.$message.error("用户名为3~15个字符，仅限于字母数字下划线中文")},blogLogin:function(){Object(l.a)("/auth/login","POST","username=lts&password=123456").then(function(e){console.log("博客登录成功")})},toRegister:function(){this.isShow=!this.isShow,this.username="",this.password=""},register:function(){var e=this;c.test(this.username)?d.test(this.password)?a.a.register({username:this.username,password:this.password}).then(function(t){console.log(t),e.$router.push("/"),i.Message.success("注册成功"),window.localStorage.setItem("token","access_token"),window.localStorage.setItem("userName",e.username)}).catch(function(t){e.$message.error(t.msg)}):this.$message.error("密码格式错误，请输入6~10个字符"):this.$message.error("用户名为3~15个字符，仅限于字母数字下划线中文")}}),created:function(){}},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"box"},[s("div",{staticClass:"login-box"},[e.isShow?e._e():s("div",[s("div",{staticClass:"user"},[e._v("\n        用户名:\n        "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"pass"},[e._v("\n        密码:\n        "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{focus:"",type:"password",placeholder:"请输入密码"},domProps:{value:e.password},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)},input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),s("el-row",{staticStyle:{"margin-top":"20px"}},[s("el-col",[s("el-button",{attrs:{type:"success",round:""},on:{click:e.login}},[e._v("登录")])],1)],1)],1),e._v(" "),e.isShow?s("div",[s("div",{staticClass:"user"},[s("label",{attrs:{for:""}},[e._v("\n          用户名:\n          "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"pass"},[s("label",{attrs:{for:""}},[e._v("\n          密码:\n          "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:e.password},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)},input:function(t){t.target.composing||(e.password=t.target.value)}}})])]),e._v(" "),s("el-row",{staticStyle:{"margin-top":"20px"}},[s("el-col",[s("el-button",{attrs:{type:"primary",round:""},on:{click:e.register}},[e._v("注册")])],1)],1)],1):e._e(),e._v(" "),s("el-row",{staticStyle:{"margin-top":"20px",color:"green"}},[s("el-col",[s("span",{on:{click:e.toRegister}},[e._v(e._s(e.isShow?"已有账号去登录":"还没账号?去注册"))])])],1)],1)])},staticRenderFns:[]};var g=s("VU/8")(p,m,!1,function(e){s("5I7m")},"data-v-25a8fb4b",null);t.default=g.exports}});
//# sourceMappingURL=2.8355d8c243f169b59e7a.js.map